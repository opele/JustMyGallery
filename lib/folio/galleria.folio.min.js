/**
 * Galleria - v1.6.1 2019-10-17
 * 
 *
 * Copyright (c) 2010 - 2019 worse is better UG
 * Licensed under the MIT License.
 *
 * Custom changes: 
 * - move info box to the left screen end instead of left picture edge
 */

!function(t,i){"function"==typeof define&&define.amd?define(["../galleria","jquery"],function(e,n){return i(t,e,n)}):"object"==typeof module&&module.exports?module.exports=i(t,require("galleria"),require("jquery")):i(t,t.Galleria,t.jQuery)}(window,function(t,i,e){return i.addTheme({name:"folio",version:1.6,author:"Galleria",css:"galleria.folio.css",defaults:{transition:"pulse",thumbCrop:"width",imageCrop:!1,carousel:!1,show:!1,easing:"galleriaOut",trueFullscreen:!1,_webkitCursor:!1,_animate:!0,_center:!1,_onClick:null},init:function(n){i.requires(1.6,"This version of Folio theme requires Galleria version 1.6 or later"),this.addElement("preloader","loaded","close").append({container:"preloader",preloader:"loaded",stage:"close"});var a=this,o=this.$("stage"),s=this.$("thumbnails"),r=this.$("thumbnails-container"),h=this.$("images"),c=this.$("info"),l=this.$("loader"),d=this.$("target"),u=0,f=d.width(),g=n._center,p=0,m=0,b=t.location.hash.substr(2),y=function(t){a.$("info").css({left:10})},w=function(i){return Math.max.apply(t,i)},v=function(n,a){a=e.extend({speed:400,width:190,onbrick:function(){},onheight:function(){},delay:0,debug:!1},a);var o,h,c,l,d=(n=e(n)).children(),u=n.width(),f=Math.floor(u/a.width),m=[],b={float:"none",position:"absolute",display:i.SAFARI?"inline-block":"block"};if(g){var y=((u=r.width())-(f*p-10))/2;s.css("left",f?y:0)}if(n.data("colCount")!==f&&(n.data("colCount",f),d.length)){for(o=0;o<f;o++)m[o]=0;n.css("position","relative"),d.css(b).each(function(n,s){for(s=e(s),o=f-1;o>-1;o--)m[o]===(r=m,Math.min.apply(t,r))&&(h=o);var r;"number"==typeof(c={top:m[h],left:a.width*h}).top&&"number"==typeof c.left&&(a.speed?t.setTimeout(function(t,e,n){return function(a){i.utils.animate(t,n,{easing:"galleriaOut",duration:e.speed,complete:e.onbrick})}}(s,a,c),n*a.delay):(s.css(c),a.onbrick.call(s)),s.data("height")||s.data("height",s.outerHeight(!0)),m[h]+=s.data("height"))}),(l=w(m))<0||"number"==typeof l&&(a.speed?n.animate({height:w(m)},a.speed,a.onheight):(n.height(w(m)),a.onheight.call(n)))}};g&&this.$("container").addClass("center"),this.bind("fullscreen_enter",function(t){this.$("container").css("height","100%"),a.finger&&e.each(a._controls.slides,function(t,i){e(i.container).show()})}),this.bind("fullscreen_exit",function(t){this.getData().iframe&&(e(this._controls.getActive().container).find("iframe").remove(),this.$("container").removeClass("iframe")),i.TOUCH||e(a._controls.getActive().container).hide(),a.finger&&e.each(a._controls.slides,function(t,i){e(i.container).hide()})}),this._fullscreen.beforeExit=function(t){c.hide(),i.IE8&&i.utils.animate(a.getActiveImage(),{opacity:0},{duration:200}),i.utils.animate(o[0],{opacity:0},{duration:200,complete:function(){o.css({visibility:"hidden",opacity:1}),s.show(),i.utils.animate(s[0],{opacity:1},{duration:200}),t()}})},this.bind("thumbnail",function(r){this.addElement("plus");var c=r.thumbTarget,l=this.$("plus").css({display:"block"}).insertAfter(c),f=e(c).parent().data("index",r.index);n.showInfo&&this.hasInfo(r.index)&&l.append("<span>"+this.getData(r.index).title+"</span>"),p=p||e(c).parent().outerWidth(!0),m=m||p-e(c).width(),e(c).css("opacity",0),f.off(n.thumbEventType),i.IE?l.hide():l.css("opacity",0),i.TOUCH?f.on("touchstart",function(){l.css("opacity",1)}).on("touchend",function(){l.hide()}):f.hover(function(){i.IE?l.show():l.stop().css("opacity",1)},function(){i.IE?l.hide():l.stop().animate({opacity:0},300)}),u++,this.$("loaded").css("width",u/this.getDataLength()*100+"%"),u===this.getDataLength()&&(this.$("preloader").fadeOut(100),s.data("colCount",null),v(s,{width:p,speed:n._animate?400:0,onbrick:function(){var r=e(this).find("img, .img");t.setTimeout(function(t){return function(){i.utils.animate(t,{opacity:1},{duration:n.transition_speed,complete:function(){e(t).parent().css("background","#000")}}),t.parent().off("click:fast click").on("click:fast",function(){var t=e(this).data("index");i.IE<9&&e(this).find(".galleria-plus").hide(),e.isFunction(n._onClick)?n._onClick.call(a,a.getData(t)):(o.css({visibility:"visible",opacity:0}),a.$("target").height(a.$("target").height()),a.finger&&h.css("opacity",0),i.utils.animate(s[0],{opacity:0},{duration:100,complete:function(){s.hide(),a.enterFullscreen(),i.utils.animate(o[0],{opacity:1},{duration:200,complete:function(){a.finger&&(h.animate({opacity:1}),a.finger.moveTo(t)),a.finger&&a.finger.setPosition(-t*a.finger.width),a.show(t)}})}}))})}}(r),n._animate?100*r.parent().data("index"):0)},onheight:function(){d.height(s.height())}}))}),this.bind("loadstart",function(t){t.cached||l.show()}),this.bind("data",function(){u=0}),this.bind("loadfinish",function(t){t.galleriaData&&(l.hide(),this.finger||c.hide(),this.hasInfo()&&n.showInfo&&this.isFullscreen()&&!this.finger&&c.fadeIn(n.transition?n.transitionSpeed:0),y(e(t.imageTarget).width()),this.finger&&n.showInfo&&c.show())}),i.TOUCH||n._webkitCursor||(this.addIdleState(this.get("image-nav-left"),{left:-100}),this.addIdleState(this.get("image-nav-right"),{right:-100}),this.addIdleState(this.get("info"),{opacity:0})),this.$("container").css({width:n.width,height:"auto"}),n._webkitCursor&&i.WEBKIT&&!i.TOUCH&&this.$("image-nav-right,image-nav-left").addClass("cur"),i.TOUCH&&this.setOptions({transition:"fadeslide",initialTransition:!1}),this.$("close").on("click:fast",function(){a.exitFullscreen()}),i.History&&b&&(o.css("visibility","visible"),s.css("opacity",0),this.$("preloader").hide(),this.enterFullscreen(function(){this.show(parseInt(b,10))}));var I=null,$=function(t){if(I=null,a.isFullscreen())a.getActiveImage()&&y(a.getActiveImage().width);else{var i=r.width();i!==f&&(f=i,v(s,{width:p,delay:50,debug:!0,onheight:function(){d.height(s.height())}}))}};e(t).resize(function(){I&&clearTimeout(I),I=setTimeout($,200)}),$()}}),i});