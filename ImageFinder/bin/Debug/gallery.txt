Gallery Website Dev Notes



TODO:


remove an image when a tag was removed which is filtered for when closing the details view
	appy filter function on previously opened image

issue: when going forward in details view need to add loading for preview images

preload the next and previous x full sized images when in detailed view

when opening details image need a loading animation instead of showing the previous image
	requires testing with non cached images which load with a latency

- use minified JS for external libs
- test in Edge/FF/Chrome on Mac and PC
- add MIT license
- create github page: https://docs.github.com/en/pages/getting-started-with-github-pages/creating-a-github-pages-site
- multithreading c# app for previewimage generaion


bookmarks
usecase: comic uploaded with 500 pages and user wants continue on page 300 without scrolling down loading all the 300 preview images
add another 'sidebar' button with a bookmarks icon
opens a sidebar with preview images which have been bookmarked
the list is filtered by the currently selected filter criteria
otherwise displays: "no bookmarks found for selected filters"
allows to clear a bookmark directly in the sidebar but displays a confirmation dialogue
when a bookmark is selected, loads the img top left corner in the gallery view (first image)
previous imgs are loaded when scrolled up, next images are lazy loaded as currently
add bookmark toggle button on image details view

impl:
loading bookmark and onwards: 
add prevImgOffset = 0; to tryLoadNextChunk();
add tryLoadPreviousChunk();
goes from offset to 0

filtering and sorting both call loadImages();
this also needs to refresh the bookmarks list with an offset each 
the bookmark consists of a simple offset which is an index of the imagesToLoad array

add 
function loadBookmark(bookmarkIndex) {
	loadImages(bookmarkIndex); // sets prevImgOffset = bookmarkIndex;
}

loading earlier images on scrollup:
Galleria.get(0).splice(0,0, ...imagesToLoad.slice(start, end));




settings:
-- for image details view --

Initial Image Width Scale
Setting for optimal width with lower and upper bound: integer

Initial Image Height Scale
- lower and upper bound


Scale Up Image Width
Fit the image to the screen when too small: boolean
Fit the image to the screen when too big

Scale Down Image Width
Display image in optimal width when too big: boolean
Fit the image to the screen when too big

Scale Down Threshold
If the image width is bigger than X times the browser window width, then don't scale it down to fit the screen. For instance, webcomics read from left to right would be unreadable if scaled down too much.

Repeat above 3 options for the Height



Always display the image in original size: boolean
-> not needed be because if all else is unselected this is the logical consequence and no scaling is applied

Automatically switch between fitting width/height of the image and width only depending on ration between image and screen height: float
Example: if set to 1.5 the image is fully fit to the screen when it is at most 50% longer than the screen. Otherwise only the width is fitted and the image length adjusted in proportion.
-> the ratio applies AFTER scaling down to optimal width
-> this also enables the 'fit if too small option'


Other setting:

Show image title
Show rating
Show 'My Tags'




experimental: 
preview image width?
would need to change the app to allow a different width
-> should not be changed by user because the user would not be able to change the actual image size (avoid scaling for perfromance)











resources:
https://colorlib.com/wp/template/shutter/

uses Licence: CC BY 3.0
https://creativecommons.org/licenses/by/3.0/
so just need to credit
claims it is free but can only buy it...


lazy loading images:
https://developer.mozilla.org/en-US/docs/Web/Performance/Lazy_loading#images_and_iframes
-> lazy is the default


templating:
https://www.codereadability.com/constructing-html-with-templates/


image grid with different sizes
same width on all images but optimised height allows for no gaps / whitespace:
https://www.w3schools.com/howto/howto_js_image_grid.asp
need support for allowing different heights for preview images
-> cant be used because requires fixed amount of images

alternative JS library:
https://github.com/galleriajs/galleria
demos:
https://galleria.foliofusion.com/
https://theshopkeepers.com/shopkeeper/galleria/themes/folio/demo.html

image grid js lib:
https://github.com/schlosser/pig.js
but horizontal flex with fixed height


border around images:
https://www.w3schools.com/howto/howto_css_border_image.asp




---
backup:
avoid main page header flashing when navigating between images:
Galleria.on('lightbox_open', function(e) {
			$("#galleryHeader").get(0).style.display = 'none';
		});
		
		Galleria.on('lightbox_close', function(e) {
			$("#galleryHeader").get(0).style.display = 'block';
		});







