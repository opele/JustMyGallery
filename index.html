<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	
	<!-- original bootstrap css:
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
	-->
	<!-- custom bootstrap css theme from https://github.com/thomaspark/bootswatch -->
	<link rel="stylesheet" href="lib/bootstrap.min.css">
	
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="lib/cookiealert.css">
	<link rel="stylesheet" href="lib/bootstrap-select.min.css">


	<style>
		.galleria{ min-width: 500px; min-height: 4000px; background: #2b3e50 }
		
		
		body .galleria-thumbnails .galleria-image { 
			width:230px, /* the width is hardcoded in the theme css */
		}
		
		.image-size-range {
			width: 150px;
			position: absolute;
			z-index: 5;
		}
		
		
		.rate {
			float: left;
			height: 22px;
			padding: 0 12px;
		}
		
		.checked {
            color : #ffc700;
            font-size : 20px;
        }
        .unchecked {
			color : #ccc;
            font-size : 20px;
        }
		
		.checked:hover,
		.unchecked:hover {
            font-size : 25px;
        }
        
        
        #sentinel {
		  width: 1px;
		  height: 1px;
		}
		
		
		/* Sidebar Start */
		.sidebar {
			opacity: 0.85;
			min-height: 100vh;
			height: 100%;
			width: 250px;
			padding: 0;
			position: fixed;
			z-index: 1;
			top: 0;
			left: -250px;
			overflow-x: hidden;
			transition: 0.5s;
			padding-top: 60px;
		}
		
		.sidebar-input-box {
			 background-color: #a5b6c3;
			 position: absolute;
			 right: 5px;
			 width: 158px;
		}

		/* for smaller screens */
		@media screen and (max-height: 450px) {
		  .sidebar {padding-top: 15px;}
		}

		/* Separators */
		.sidebar-separator-title {
			height: 35px;
			background-color: #6c5a5a;
		}
		.sidebar-separator {
			height: 25px;
			background-color: #6c5a5a;
		}
		.logo-separator {
			height: 60px;
		}
		
		/* Sidebar End */
		
		
		
	</style>


	<script>


var imgData = [

                    {
                        thumb: 'images/205946main_eaglefairy_hst_bigPreview230px.jpeg',
                        image: 'images/205946main_eaglefairy_hst_big.jpeg',
                        title: '205946main_eaglefairy_hst_big.jpeg',
                        timestamp: '1618747561501',
                        creationDate: '18/04/2021 12:06:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/colin-lloyd-ommYBGJvV2s-unsplashPreview230px.jpg',
                        image: 'images/colin-lloyd-ommYBGJvV2s-unsplash.jpg',
                        title: 'colin-lloyd-ommYBGJvV2s-unsplash.jpg',
                        timestamp: '1617709921667',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/colin-lloyd-ow6n4v3vEpM-unsplashPreview230px.jpg',
                        image: 'images/colin-lloyd-ow6n4v3vEpM-unsplash.jpg',
                        title: 'colin-lloyd-ow6n4v3vEpM-unsplash.jpg',
                        timestamp: '1617709921677',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/colin-lloyd-VDpM5hiyTng-unsplashPreview230px.jpg',
                        image: 'images/colin-lloyd-VDpM5hiyTng-unsplash.jpg',
                        title: 'colin-lloyd-VDpM5hiyTng-unsplash.jpg',
                        timestamp: '1617709921687',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/cosmic-timetraveler-BzqaeA-hkkc-unsplashPreview230px.jpg',
                        image: 'images/cosmic-timetraveler-BzqaeA-hkkc-unsplash.jpg',
                        title: 'cosmic-timetraveler-BzqaeA-hkkc-unsplash.jpg',
                        timestamp: '1617709921697',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/cosmic-timetraveler-ik2BN5dI6tE-unsplashPreview230px.jpg',
                        image: 'images/cosmic-timetraveler-ik2BN5dI6tE-unsplash.jpg',
                        title: 'cosmic-timetraveler-ik2BN5dI6tE-unsplash.jpg',
                        timestamp: '1617709921697',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/dan-senior-wwSF5hWN5F0-unsplashPreview230px.jpg',
                        image: 'images/dan-senior-wwSF5hWN5F0-unsplash.jpg',
                        title: 'dan-senior-wwSF5hWN5F0-unsplash.jpg',
                        timestamp: '1617709921707',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/daniele-levis-pelusi-fh_PQtxDnLc-unsplashPreview230px.jpg',
                        image: 'images/daniele-levis-pelusi-fh_PQtxDnLc-unsplash.jpg',
                        title: 'daniele-levis-pelusi-fh_PQtxDnLc-unsplash.jpg',
                        timestamp: '1617709921723',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/dawid-sokolowski-mufeb7CMUxo-unsplashPreview230px.jpg',
                        image: 'images/dawid-sokolowski-mufeb7CMUxo-unsplash.jpg',
                        title: 'dawid-sokolowski-mufeb7CMUxo-unsplash.jpg',
                        timestamp: '1617709921727',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/deconovo-gLHI-o3Xiq8-unsplashPreview230px.jpg',
                        image: 'images/deconovo-gLHI-o3Xiq8-unsplash.jpg',
                        title: 'deconovo-gLHI-o3Xiq8-unsplash.jpg',
                        timestamp: '1617709921737',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/digital-solacism-BM3fnwQ4jHs-unsplashPreview230px.jpg',
                        image: 'images/digital-solacism-BM3fnwQ4jHs-unsplash.jpg',
                        title: 'digital-solacism-BM3fnwQ4jHs-unsplash.jpg',
                        timestamp: '1617709921747',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/digital-solacism-IPxUs7H23cE-unsplashPreview230px.jpg',
                        image: 'images/digital-solacism-IPxUs7H23cE-unsplash.jpg',
                        title: 'digital-solacism-IPxUs7H23cE-unsplash.jpg',
                        timestamp: '1617709921747',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/eberhard-grossgasteiger-S-2Ukb_VqpA-unsplashPreview230px.jpg',
                        image: 'images/eberhard-grossgasteiger-S-2Ukb_VqpA-unsplash.jpg',
                        title: 'eberhard-grossgasteiger-S-2Ukb_VqpA-unsplash.jpg',
                        timestamp: '1617709921757',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/evgeniy-sholokh-iSQ6ed05u1o-unsplashPreview230px.jpg',
                        image: 'images/evgeniy-sholokh-iSQ6ed05u1o-unsplash.jpg',
                        title: 'evgeniy-sholokh-iSQ6ed05u1o-unsplash.jpg',
                        timestamp: '1617709921767',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/finn-whelen-8GVjEJ30xFE-unsplashPreview230px.jpg',
                        image: 'images/finn-whelen-8GVjEJ30xFE-unsplash.jpg',
                        title: 'finn-whelen-8GVjEJ30xFE-unsplash.jpg',
                        timestamp: '1617709921777',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/finn-whelen-hBq6Qi2hIdc-unsplashPreview230px.jpg',
                        image: 'images/finn-whelen-hBq6Qi2hIdc-unsplash.jpg',
                        title: 'finn-whelen-hBq6Qi2hIdc-unsplash.jpg',
                        timestamp: '1617709921777',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/fred-moon-2DnRQ5IZFZo-unsplashPreview230px.jpg',
                        image: 'images/fred-moon-2DnRQ5IZFZo-unsplash.jpg',
                        title: 'fred-moon-2DnRQ5IZFZo-unsplash.jpg',
                        timestamp: '1617709921787',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/gautam-krishnan-piTwIwK7O98-unsplashPreview230px.jpg',
                        image: 'images/gautam-krishnan-piTwIwK7O98-unsplash.jpg',
                        title: 'gautam-krishnan-piTwIwK7O98-unsplash.jpg',
                        timestamp: '1617709921797',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/j-lee-0kL5NSDH_Z0-unsplashPreview230px.jpg',
                        image: 'images/j-lee-0kL5NSDH_Z0-unsplash.jpg',
                        title: 'j-lee-0kL5NSDH_Z0-unsplash.jpg',
                        timestamp: '1617709921927',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/jack-bassingthwaighte-YPZPUwJIwak-unsplashPreview230px.jpg',
                        image: 'images/jack-bassingthwaighte-YPZPUwJIwak-unsplash.jpg',
                        title: 'jack-bassingthwaighte-YPZPUwJIwak-unsplash.jpg',
                        timestamp: '1617709921957',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/jeremy-bishop-PmQb16W6KRc-unsplashPreview230px.jpg',
                        image: 'images/jeremy-bishop-PmQb16W6KRc-unsplash.jpg',
                        title: 'jeremy-bishop-PmQb16W6KRc-unsplash.jpg',
                        timestamp: '1617709921987',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/john-fowler-RsRTIofe0HE-unsplashPreview230px.jpg',
                        image: 'images/john-fowler-RsRTIofe0HE-unsplash.jpg',
                        title: 'john-fowler-RsRTIofe0HE-unsplash.jpg',
                        timestamp: '1617709922006',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/jonas-denil-MQOhQhF8WN0-unsplashPreview230px.jpg',
                        image: 'images/jonas-denil-MQOhQhF8WN0-unsplash.jpg',
                        title: 'jonas-denil-MQOhQhF8WN0-unsplash.jpg',
                        timestamp: '1617709922027',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/jonathan-bean-sbZU1j31ggE-unsplashPreview230px.jpg',
                        image: 'images/jonathan-bean-sbZU1j31ggE-unsplash.jpg',
                        title: 'jonathan-bean-sbZU1j31ggE-unsplash.jpg',
                        timestamp: '1617709922027',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/jonathan-borba-NlABENP3B1E-unsplashPreview230px.jpg',
                        image: 'images/jonathan-borba-NlABENP3B1E-unsplash.jpg',
                        title: 'jonathan-borba-NlABENP3B1E-unsplash.jpg',
                        timestamp: '1617709922036',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/joshua-fuller-NC6Ek-i5IAU-unsplashPreview230px.jpg',
                        image: 'images/joshua-fuller-NC6Ek-i5IAU-unsplash.jpg',
                        title: 'joshua-fuller-NC6Ek-i5IAU-unsplash.jpg',
                        timestamp: '1617709922047',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/josiah-ingels-X79v5N3O4yA-unsplashPreview230px.jpg',
                        image: 'images/josiah-ingels-X79v5N3O4yA-unsplash.jpg',
                        title: 'josiah-ingels-X79v5N3O4yA-unsplash.jpg',
                        timestamp: '1617709922057',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/kayle-kaupanger-ZEPJRDhm53A-unsplashPreview230px.jpg',
                        image: 'images/kayle-kaupanger-ZEPJRDhm53A-unsplash.jpg',
                        title: 'kayle-kaupanger-ZEPJRDhm53A-unsplash.jpg',
                        timestamp: '1617709922067',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/kenrick-mills-0kUOcI6SRaM-unsplashPreview230px.jpg',
                        image: 'images/kenrick-mills-0kUOcI6SRaM-unsplash.jpg',
                        title: 'kenrick-mills-0kUOcI6SRaM-unsplash.jpg',
                        timestamp: '1617709922077',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/klara-kulikova-fYUyOXuo_ZQ-unsplashPreview230px.jpg',
                        image: 'images/klara-kulikova-fYUyOXuo_ZQ-unsplash.jpg',
                        title: 'klara-kulikova-fYUyOXuo_ZQ-unsplash.jpg',
                        timestamp: '1617709922087',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/kurt-cotoaga-WvzhI-31ku0-unsplashPreview230px.jpg',
                        image: 'images/kurt-cotoaga-WvzhI-31ku0-unsplash.jpg',
                        title: 'kurt-cotoaga-WvzhI-31ku0-unsplash.jpg',
                        timestamp: '1617709922087',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/lachlan-thompson-SwgiWNurMuM-unsplashPreview230px.jpg',
                        image: 'images/lachlan-thompson-SwgiWNurMuM-unsplash.jpg',
                        title: 'lachlan-thompson-SwgiWNurMuM-unsplash.jpg',
                        timestamp: '1617709922097',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/luca-bravo-2GA2Q2ESOyg-unsplashPreview230px.jpg',
                        image: 'images/luca-bravo-2GA2Q2ESOyg-unsplash.jpg',
                        title: 'luca-bravo-2GA2Q2ESOyg-unsplash.jpg',
                        timestamp: '1617709922107',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/mak-huzokOspLhA-unsplashPreview230px.jpg',
                        image: 'images/mak-huzokOspLhA-unsplash.jpg',
                        title: 'mak-huzokOspLhA-unsplash.jpg',
                        timestamp: '1617709922116',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/manuel-boxler--CZERTBlepA-unsplashPreview230px.jpg',
                        image: 'images/manuel-boxler--CZERTBlepA-unsplash.jpg',
                        title: 'manuel-boxler--CZERTBlepA-unsplash.jpg',
                        timestamp: '1617709922126',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/marco-perretta-akNEjp2Fcjg-unsplashPreview230px.jpg',
                        image: 'images/marco-perretta-akNEjp2Fcjg-unsplash.jpg',
                        title: 'marco-perretta-akNEjp2Fcjg-unsplash.jpg',
                        timestamp: '1617709922126',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/marcus-woodbridge-NcociWzk23A-unsplashPreview230px.jpg',
                        image: 'images/marcus-woodbridge-NcociWzk23A-unsplash.jpg',
                        title: 'marcus-woodbridge-NcociWzk23A-unsplash.jpg',
                        timestamp: '1617709922137',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/martin-sanchez-ll7i0Tyab04-unsplashPreview230px.jpg',
                        image: 'images/martin-sanchez-ll7i0Tyab04-unsplash.jpg',
                        title: 'martin-sanchez-ll7i0Tyab04-unsplash.jpg',
                        timestamp: '1617709922147',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/max-tarkhov-fpujA9uxXqs-unsplashPreview230px.jpg',
                        image: 'images/max-tarkhov-fpujA9uxXqs-unsplash.jpg',
                        title: 'max-tarkhov-fpujA9uxXqs-unsplash.jpg',
                        timestamp: '1617709922157',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/max-van-den-oetelaar-F3rDBnQQbQU-unsplashPreview230px.jpg',
                        image: 'images/max-van-den-oetelaar-F3rDBnQQbQU-unsplash.jpg',
                        title: 'max-van-den-oetelaar-F3rDBnQQbQU-unsplash.jpg',
                        timestamp: '1617709922166',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/mitchell-luo-1uqdxXHRDZU-unsplashPreview230px.jpg',
                        image: 'images/mitchell-luo-1uqdxXHRDZU-unsplash.jpg',
                        title: 'mitchell-luo-1uqdxXHRDZU-unsplash.jpg',
                        timestamp: '1617709922177',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/ovca-productions-P4e80PeY7ew-unsplashPreview230px.jpg',
                        image: 'images/ovca-productions-P4e80PeY7ew-unsplash.jpg',
                        title: 'ovca-productions-P4e80PeY7ew-unsplash.jpg',
                        timestamp: '1617709922177',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/pablo-guerrero--Q1p5Gzn45c-unsplashPreview230px.jpg',
                        image: 'images/pablo-guerrero--Q1p5Gzn45c-unsplash.jpg',
                        title: 'pablo-guerrero--Q1p5Gzn45c-unsplash.jpg',
                        timestamp: '1617709922187',
                        creationDate: '06/04/2021 11:52:02',
                        tags: 'fog,nature',
                        categories: ''
                    },

                    {
                        thumb: 'images/parastoo-maleki-U-_KDtocX40-unsplashPreview230px.jpg',
                        image: 'images/parastoo-maleki-U-_KDtocX40-unsplash.jpg',
                        title: 'parastoo-maleki-U-_KDtocX40-unsplash.jpg',
                        timestamp: '1617709922197',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/philip-jahn-FIjiQ2yC7ZY-unsplashPreview230px.jpg',
                        image: 'images/philip-jahn-FIjiQ2yC7ZY-unsplash.jpg',
                        title: 'philip-jahn-FIjiQ2yC7ZY-unsplash.jpg',
                        timestamp: '1617709922206',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/raul-cacho-oses-JDOlrNAcxp0-unsplashPreview230px.jpg',
                        image: 'images/raul-cacho-oses-JDOlrNAcxp0-unsplash.jpg',
                        title: 'raul-cacho-oses-JDOlrNAcxp0-unsplash.jpg',
                        timestamp: '1617709922206',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/samuel-regan-asante-eugzGq7UviA-unsplashPreview230px.jpg',
                        image: 'images/samuel-regan-asante-eugzGq7UviA-unsplash.jpg',
                        title: 'samuel-regan-asante-eugzGq7UviA-unsplash.jpg',
                        timestamp: '1617709922217',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/shot-by-cerqueira-lYgjpIWPfvg-unsplashPreview230px.jpg',
                        image: 'images/shot-by-cerqueira-lYgjpIWPfvg-unsplash.jpg',
                        title: 'shot-by-cerqueira-lYgjpIWPfvg-unsplash.jpg',
                        timestamp: '1617709922227',
                        creationDate: '06/04/2021 11:52:02',
                        tags: 'sky,statue,building',
                        categories: ''
                    },

                    {
                        thumb: 'images/taisiia-shestopal--4lSNcG3a3g-unsplashPreview230px.jpg',
                        image: 'images/taisiia-shestopal--4lSNcG3a3g-unsplash.jpg',
                        title: 'taisiia-shestopal--4lSNcG3a3g-unsplash.jpg',
                        timestamp: '1617709922237',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/thomas-de-luze-lsNbK_oYRMQ-unsplashPreview230px.jpg',
                        image: 'images/thomas-de-luze-lsNbK_oYRMQ-unsplash.jpg',
                        title: 'thomas-de-luze-lsNbK_oYRMQ-unsplash.jpg',
                        timestamp: '1617709922255',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/tolga-ahmetler-8W1G7HtdBnc-unsplashPreview230px.jpg',
                        image: 'images/tolga-ahmetler-8W1G7HtdBnc-unsplash.jpg',
                        title: 'tolga-ahmetler-8W1G7HtdBnc-unsplash.jpg',
                        timestamp: '1617709922261',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/trail-8LPgWfHgcMg-unsplashPreview230px.jpg',
                        image: 'images/trail-8LPgWfHgcMg-unsplash.jpg',
                        title: 'trail-8LPgWfHgcMg-unsplash.jpg',
                        timestamp: '1617709922276',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/usman-omar-ho7e8JYEo3w-unsplashPreview230px.jpg',
                        image: 'images/usman-omar-ho7e8JYEo3w-unsplash.jpg',
                        title: 'usman-omar-ho7e8JYEo3w-unsplash.jpg',
                        timestamp: '1617709922279',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/willian-justen-de-vasconcellos-kAvS5cwZSUc-unsplashPreview230px.jpg',
                        image: 'images/willian-justen-de-vasconcellos-kAvS5cwZSUc-unsplash.jpg',
                        title: 'willian-justen-de-vasconcellos-kAvS5cwZSUc-unsplash.jpg',
                        timestamp: '1617313108000',
                        creationDate: '01/04/2021 21:38:28',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/xps-1gLdTsX3_70-unsplashPreview230px.jpg',
                        image: 'images/xps-1gLdTsX3_70-unsplash.jpg',
                        title: 'xps-1gLdTsX3_70-unsplash.jpg',
                        timestamp: '1617709922307',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/xps-bXfQLglc81U-unsplashPreview230px.jpg',
                        image: 'images/xps-bXfQLglc81U-unsplash.jpg',
                        title: 'xps-bXfQLglc81U-unsplash.jpg',
                        timestamp: '1618757062000',
                        creationDate: '18/04/2021 14:44:22',
                        tags: '',
                        categories: ''
                    },

                    {
                        thumb: 'images/building/artem-nedzelskiy-ACmrgE8VUCE-unsplashPreview230px.jpg',
                        image: 'images/building/artem-nedzelskiy-ACmrgE8VUCE-unsplash.jpg',
                        title: 'artem-nedzelskiy-ACmrgE8VUCE-unsplash.jpg',
                        timestamp: '1617709921623',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: 'building'
                    },

                    {
                        thumb: 'images/building/christian-wiediger-ZQfh9jKN2x0-unsplashPreview230px.jpg',
                        image: 'images/building/christian-wiediger-ZQfh9jKN2x0-unsplash.jpg',
                        title: 'christian-wiediger-ZQfh9jKN2x0-unsplash.jpg',
                        timestamp: '1617709921657',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: 'building'
                    },

                    {
                        thumb: 'images/building/sunyu-kim-sotQN78LOVI-unsplashPreview230px.jpg',
                        image: 'images/building/sunyu-kim-sotQN78LOVI-unsplash.jpg',
                        title: 'sunyu-kim-sotQN78LOVI-unsplash.jpg',
                        timestamp: '1617709922237',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: 'building'
                    },

                    {
                        thumb: 'images/building/toni-tan-2MXu70l3vCs-unsplashPreview230px.jpg',
                        image: 'images/building/toni-tan-2MXu70l3vCs-unsplash.jpg',
                        title: 'toni-tan-2MXu70l3vCs-unsplash.jpg',
                        timestamp: '1617709922269',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: 'building'
                    },

                    {
                        thumb: 'images/nature/christopher-czermak-ulG2K7id26s-unsplashPreview230px.jpg',
                        image: 'images/nature/christopher-czermak-ulG2K7id26s-unsplash.jpg',
                        title: 'christopher-czermak-ulG2K7id26s-unsplash.jpg',
                        timestamp: '1617709921667',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: 'nature'
                    },

                    {
                        thumb: 'images/nature/will-turner-7MClrxZ8F6w-unsplashPreview230px.jpg',
                        image: 'images/nature/will-turner-7MClrxZ8F6w-unsplash.jpg',
                        title: 'will-turner-7MClrxZ8F6w-unsplash.jpg',
                        timestamp: '1617709922287',
                        creationDate: '06/04/2021 11:52:02',
                        tags: '',
                        categories: 'nature'
                    },

                    {
                        thumb: 'images/nature/snow/annie-spratt-wXWbUuaoEy0-unsplashPreview230px.jpg',
                        image: 'images/nature/snow/annie-spratt-wXWbUuaoEy0-unsplash.jpg',
                        title: 'annie-spratt-wXWbUuaoEy0-unsplash.jpg',
                        timestamp: '1617709921597',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: 'snow'
                    },

                    {
                        thumb: 'images/nature/snow/artem-nedzelskiy-5yxo67MrD3c-unsplashPreview230px.jpg',
                        image: 'images/nature/snow/artem-nedzelskiy-5yxo67MrD3c-unsplash.jpg',
                        title: 'artem-nedzelskiy-5yxo67MrD3c-unsplash.jpg',
                        timestamp: '1617709921607',
                        creationDate: '06/04/2021 11:52:01',
                        tags: 'snow,cold night,trees',
                        categories: 'snow'
                    },

                    {
                        thumb: 'images/nature/trees/bogdan-pasca-PfmRghpQljw-unsplashPreview230px.jpg',
                        image: 'images/nature/trees/bogdan-pasca-PfmRghpQljw-unsplash.jpg',
                        title: 'bogdan-pasca-PfmRghpQljw-unsplash.jpg',
                        timestamp: '1617709921637',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: 'trees'
                    },

                    {
                        thumb: 'images/nature/trees/casey-horner-xXy8JPOzed4-unsplashPreview230px.jpg',
                        image: 'images/nature/trees/casey-horner-xXy8JPOzed4-unsplash.jpg',
                        title: 'casey-horner-xXy8JPOzed4-unsplash.jpg',
                        timestamp: '1617709921637',
                        creationDate: '06/04/2021 11:52:01',
                        tags: '',
                        categories: 'trees'
                    },

                    {
                        thumb: 'images/people/andrew-neel-U4euPE63P3E-unsplashPreview230px.jpg',
                        image: 'images/people/andrew-neel-U4euPE63P3E-unsplash.jpg',
                        title: 'andrew-neel-U4euPE63P3E-unsplash.jpg',
                        timestamp: '1617709921587',
                        creationDate: '06/04/2021 11:52:01',
                        tags: 'coffee,drinks',
                        categories: 'people'
                    },

                    {
                        thumb: 'images/people/cat-han-j2_UihbuU5E-unsplashPreview230px.jpg',
                        image: 'images/people/cat-han-j2_UihbuU5E-unsplash.jpg',
                        title: 'cat-han-j2_UihbuU5E-unsplash.jpg',
                        timestamp: '1617709921647',
                        creationDate: '06/04/2021 11:52:01',
                        tags: 'hat',
                        categories: 'people'
                    },
];












	</script>
</head>

<body>

	<div id="sidebar-container" class="sidebar d-none d-md-block">
        <ul class="list-group">
		
            <li class="list-group-item sidebar-separator-title text-muted d-flex align-items-center menu-collapsed">
                <small>Sorting</small>
            </li>
			<a id="sortByDateDescButton" class="list-group-item list-group-item-action flex-column align-items-start bg-dark">
				<div class="d-flex w-100 justify-content-start align-items-center">
					<div class="custom-control custom-switch">
					  <input type="checkbox" class="custom-control-input" id="sortByDateDescSwitch">
					  <label class="custom-control-label" for="sortByDateDescSwitch">Newest first</label>
					</div>
				</div>
			</a>
			
			<a id="sortByDateAscButton" class="list-group-item list-group-item-action flex-column align-items-start bg-dark">
				<div class="d-flex w-100 justify-content-start align-items-center">
					<div class="custom-control custom-switch">
					  <input type="checkbox" class="custom-control-input" id="sortByDateAscSwitch">
					  <label class="custom-control-label" for="sortByDateAscSwitch">Oldest first</label>
					</div>
				</div>
			</a>
			
            <a id="sortByNameButton" class="list-group-item list-group-item-action flex-column align-items-start bg-dark">
				<div class="d-flex w-100 justify-content-start align-items-center">
					<div class="custom-control custom-switch">
					  <input type="checkbox" class="custom-control-input" id="sortByNameSwitch">
					  <label class="custom-control-label" for="sortByNameSwitch">Alphabetical by Title</label>
					</div>
				</div>
			</a>
			
			<a id="sortByRatingButton" class="list-group-item list-group-item-action flex-column align-items-start bg-dark">
				<div class="d-flex w-100 justify-content-start align-items-center">
					<div class="custom-control custom-switch">
					  <input type="checkbox" class="custom-control-input" id="sortByRatingSwitch">
					  <label class="custom-control-label" for="sortByRatingSwitch">Rated first</label>
					</div>
				</div>
			</a>
			
            <li class="list-group-item sidebar-separator-title text-muted d-flex align-items-center menu-collapsed">
                <small>Filtering</small>
            </li>
			
			<!-- Title Filter -->
            <div class="list-group-item bg-dark" id="nameFilterContainer">
                <div class="d-flex w-100 justify-content-start align-items-center">
                    <label for="inputNameFilter">Title: </label>
					<input type="text" id="inputNameFilter" class="sidebar-input-box" style='margin-left: 10px' data-toggle="tooltip" data-placement="bottom" data-delay='{"show":500, "hide":500}' data-trigger='focus' title="Press Return Key to confirm">
                </div>
            </div>
			
			<!-- Date Filter -->
			<div class="list-group-item bg-dark" id="dateFilterContainer">
                <div class="d-flex w-100 justify-content-start align-items-center">
                    <label for="inputDateFromFilter">From: </label>
					<input type="date" id="inputDateFromFilter" class="sidebar-input-box" style='margin-left: 10px' onblur='filterByDateRange()' onchange='filterFromDateChanged()'>
                </div>
				<div class="d-flex w-100 justify-content-start align-items-center">
                    <label for="inputDateToFilter">To: </label>
					<input type="date" id="inputDateToFilter" class="sidebar-input-box" style='margin-left: 28px' onblur='filterByDateRange()' onchange='filterToDateChanged()'>
                </div>
            </div>
			
			<!-- Tags Filter -->
			<div class="list-group-item bg-dark" id="tagsFilterContainer">
                <div class="d-flex w-100 justify-content-start align-items-center">
					<label for="tagsFilter" style='margin-right: 35px'>Tags: </label>
                    <select id="tagsFilter" class="!sidebar-input-box selectpicker" multiple title="Nothing selected"></select>
                </div>
            </div>
			
			<!-- Category Filter -->
			<div class="list-group-item bg-dark" id="categoryFilterContainer">
                <div class="d-flex w-100 justify-content-start align-items-center">
					<label for="categoryFilter" style='margin-right: 5px'>Category: </label>
					<select id="categoryFilter" class="!sidebar-input-box selectpicker" title="Nothing selected" data-allow-clear="true"></select>
                </div>
            </div>
			
			<!-- Combine Tags And Category Filter -->
			<div class="list-group-item bg-dark" id="toggleTagsAndCategoryFilterContainer">
				<button id="toggleTagsAndCategoryFilterBtn" 
					class="btn btn-outline-primary d-flex w-100" 
					style="padding-left:35px;" 
					onclick="toggleTagsAndCategoryFilter()" 
					data-toggle="tooltip" data-placement="bottom" data-delay='{"show":500, "hide":500}' 
					data-trigger='hover' title="Toggles if images must have a selected tag or category vs tag and category">Tags AND Category</button>
            </div>
			
            <!-- Separator without title -->
            <li class="list-group-item sidebar-separator"></li>
            <a onclick="closeSidebar()" class="bg-dark list-group-item list-group-item-action d-flex align-items-center">
                <div class="d-flex w-100 justify-content-start align-items-center">
                    <span id="collapse-icon" class="fa fa-times mr-3"></span>
                    <span id="collapse-text">Close</span>
                </div>
            </a>
        </ul>
    </div><!-- sidebar-container END -->

	<div class="container">
		<div class="jumbotron">
			<h1 class="display-3">Example Gallery</h1>
			<p class="lead">Free to use gallery template for anyone interested in hosting images. Placeholder pictures from <a target="_blank" href="https://unsplash.com/">Unsplash</a>.</p>
			<hr class="my-4">
			<p>Ideal for large galleries which can be filtered and sorted. Made with <a target="_blank" href="https://github.com/galleriajs/galleria">Galleria</a> Folio and many other components. No server side code. 
			</br> Visit the open source GitHub repository for details. </p>
			
		</div>
	</div>
	
	<span id="sidebarOpenBtn" style="font-size:30px;cursor:pointer;position:fixed;left:10px;top:50px;z-index:5;" onclick="openSidebar()">&#9776;</span>
	 
	<div class="galleria"></div>
	
	
	
	
	<!-- Bootstrap-Cookie-Alert -->
	<div class="alert text-center cookiealert" role="alert">
		This website uses your local browser storage to remember your filter / sort settings and when you rate images.
		<button type="button" class="btn btn-primary btn-sm acceptcookies">
			I consent
		</button>
	</div>
	
	<script src="lib/jquery-3.6.0.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>
	<script src="lib/galleria.js"></script>
	<script src="lib/bootstrap-select.min.js"></script>
	<script src="lib/cookiealert.js"></script>
	
	<script>
	
		// debug
		var numberOfPreviewImagesLoaded = 0; // currently displayed, resets when applying new filtering/sorting
		var numberOfFullSizeImagesLoaded = 0; // loaded in this session without page refresh
	
		var filterByNameEnabled = false;
		var filterByDateEnabled = false;
		var currentFromFilterDate;
		var currentToFilterDate;
		var filterByTagsEnabled = false;
		var currentFilterTags;
		var filterByCategoryEnabled = false;
		var currentFilterCategory;
		var categoriesAndTags = true;
		
		var nameFilterFunc = function(dataItemToFilter) {return true;};
		var tagsFilterFunc = function(dataItemToFilter) {return true;};
		var categoryFilterFunc = function(dataItemToFilter) {return true;};
		var dateRangeFilterFunc = function(dataItemToFilter) {return true;};
		var filterFunction = function(arr) {
				return arr.filter(function(dataItemToFilter) {
						return nameFilterFunc(dataItemToFilter) && 
							(
								(categoriesAndTags && tagsFilterFunc(dataItemToFilter) && categoryFilterFunc(dataItemToFilter)) ||
								(!categoriesAndTags && (tagsFilterFunc(dataItemToFilter) || categoryFilterFunc(dataItemToFilter))) 
							) &&
							dateRangeFilterFunc(dataItemToFilter);
					});
			};
		
		refreshSelectableTags();
		refreshSelectableCategories();
		
		(function() {
		
			Galleria.loadTheme('lib/folio/galleria.folio.min.js');
			
			// causes cors error with local files in FF, first param must be an URL, https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS/Errors/CORSRequestNotHttp
			//$.getJSON('imageData.json', function( data ) {
			//	Galleria.run('.galleria', {
			//	dataSource: data});
			
			loadImages();
			
		}());
		
		var imagesToLoad;
		var scrolledToEnd = false;
		var lastChunkLoaded = false;
		function loadImages() {
		
			numberOfPreviewImagesLoaded = 0;
		
			imagesToLoad = imgData;
			if (typeof filterFunction === 'function') {
				imagesToLoad = filterFunction(imagesToLoad);
			}
			
			imagesToLoad.sort(sortImages);
		
			Galleria.run('.galleria', {
				dataSource: imagesToLoad.slice(0,30),
				transition: 'pulse',
				thumbCrop: 'width',
				imageCrop: false,
				carousel: false,
				show: false,
				easing: 'galleriaOut',
				fullscreenDoubleTap: false,
				// Shows navigation as cursor for webkit
				_webkitCursor: true,
				// Animates the thumbnails: when a new image is pushed they fly into place
				// unfortunately bugged: the images keep loading for around 5sec even though they are actually loaded (even on local)
				_animate: false,
				// Centers the thumbnails inside it’s container
				_center: true
			});
			
			// navigate to top
			window.scrollTo(0, 0);
		}
		
		
		Galleria.ready(function(options) {
			scrolledToEnd = false;
			lastChunkLoaded = false;
			updateLazyLoadSentinel();
		});
		
		function updateLazyLoadSentinel() {
			var galleriaRef = Galleria.get(0);
			var thumbsContainer = $('.galleria-thumbnails');
			thumbsContainer.append('<div id="sentinel"></div>');
			var sentinel = $('#sentinel').get(0);
			
			var callback = (entries, observer) => {
			  entries.forEach(entry => {
				  if (entry.isIntersecting) {
					scrolledToEnd = true;
					tryLoadNextChunk();
				  } else {
					scrolledToEnd = false;
				  }
			  });
			};
			
			var observer = new IntersectionObserver(callback);
			observer.observe(sentinel);
			
			galleriaRef.bind("thumbnail", function(e) {
				++numberOfPreviewImagesLoaded;
				thumbsContainer.get(0).appendChild(sentinel);
				if (e.index == galleriaRef.getDataLength() - 1) {
					lastChunkLoaded = true;
					tryLoadNextChunk();
				}
			});
		}
		
		function tryLoadNextChunk() {
		
			var gallery = Galleria.get(0);
			var chunkSize = 15;
			var currentLoadSize = gallery.getDataLength();
			
			if (lastChunkLoaded && scrolledToEnd && currentLoadSize < imagesToLoad.length) {
				
				var nextLoadSize = currentLoadSize + chunkSize;
				if (nextLoadSize > imagesToLoad.length) {
					nextLoadSize = imagesToLoad.length;
				}
				
				gallery.push(imagesToLoad.slice(currentLoadSize, nextLoadSize));
				
				lastChunkLoaded = false;
			}
		}
		
		
		
		// sorting
		var sortByRating = false;
		var sortByDateAsc = false;
		var sortByDateDesc = false;
		var sortByName = false;
		
		function sortImages(a, b) {
			
			var ratingSortResult = 0;
			if (sortByRating) {
				ratingSortResult = sortImagesByRating(a, b);
			}
			
			if (ratingSortResult == 0) {
			
				if (sortByDateAsc) {
					if(a.timestamp && b.timestamp) return a.timestamp - b.timestamp;
					
				} else if (sortByDateDesc) {
					if(a.timestamp && b.timestamp) return b.timestamp - a.timestamp;
					
				} else if (sortByName) {
					if(a.title && b.title) {
						var x = a.title.toLowerCase();
						var y = b.title.toLowerCase();
						if (x < y) return -1;
						if (x > y) return 1;
					}
				}
			}
			
			return ratingSortResult;
		}
		
		function sortImagesByRating(a, b) {
			var localItemObjA = JSON.parse(localStorage.getItem(a.image));
			var aHasRating = localItemObjA && localItemObjA.rating;
			
			var localItemObjB = JSON.parse(localStorage.getItem(b.image));
			var bHasRating = localItemObjB && localItemObjB.rating;
			
			if (!aHasRating && !bHasRating) return 0;
			if (!aHasRating && bHasRating) return 1;
			if (aHasRating && !bHasRating) return -1;
			if (localItemObjA.rating > localItemObjB.rating) return -1;
			if (localItemObjA.rating < localItemObjB.rating) return 1;
			return 0;
		}
		
		(function() {
			// when the list item is highlighted toggle the switch regardless if the checkbox was actually clicked
			$('#sortByDateAscButton').on('click', function(e) {
			  toggleSortByDateAsc();
			});
			// ignore clicks directly on the checkbox, which also trigger the parent
			$('#sortByDateAscSwitch').on('click', function(e) {
				return false;
			});
			
			$('#sortByDateDescButton').on('click', function(e) {
			  toggleSortByDateDesc();
			});
			$('#sortByDateDescSwitch').on('click', function(e) {
				return false;
			});
			
			$('#sortByNameButton').on('click', function(e) {
			  toggleSortByName();
			});
			$('#sortByNameSwitch').on('click', function(e) {
				return false;
			});
			
			$('#sortByRatingButton').on('click', function(e) {
			  toggleSortByRating();
			});
			$('#sortByRatingSwitch').on('click', function(e) {
				return false;
			});
		}());
		
		function toggleSortByDateAsc() {
			sortByDateAsc = !sortByDateAsc;
			$('#sortByDateAscSwitch').prop('checked', sortByDateAsc);
			sortByDateDesc = false;
			sortByName = false;
			refreshSortingUi();
			loadImages();
		}
		
		function toggleSortByDateDesc() {
			sortByDateDesc = !sortByDateDesc;
			$('#sortByDateDescSwitch').prop('checked', sortByDateDesc);
			sortByDateAsc = false;
			sortByName = false;
			refreshSortingUi();
			loadImages();
		}
		
		function toggleSortByName() {
			sortByName = !sortByName;
			$('#sortByNameSwitch').prop('checked', sortByName);
			sortByDateDesc = false;
			sortByDateAsc = false;
			refreshSortingUi();
			loadImages();
		}
		
		function toggleSortByRating() {
			sortByRating = !sortByRating;
			$('#sortByRatingSwitch').prop('checked', sortByRating);
			loadImages();
		}
		
		function refreshSortingUi() {
			$('#sortByDateAscSwitch').prop('checked', sortByDateAsc);
			$('#sortByDateDescSwitch').prop('checked', sortByDateDesc);
			$('#sortByNameSwitch').prop('checked', sortByName);
			$('#sortByRatingSwitch').prop('checked', sortByRating);
		}
		
		
		
		//// filters ////
		// image title filter
		(function() {
				$('#inputNameFilter').keypress(function(event) {
					
					if (event.which == 13) { // return key
						event.preventDefault();
						filterByName();
						$('[data-toggle="tooltip"]').tooltip('hide');
					}
				});
		}());
		
		function filterByName() {
			
			var filter = $("#inputNameFilter").val();
			if (isBlank(filter)) {
				filterByNameEnabled = false;
				nameFilterFunc = function(dataItemToFilter) {return true;};
			} else {
				filterByNameEnabled = true;
				nameFilterFunc = function(dataItemToFilter) {
						return dataItemToFilter.title && dataItemToFilter.title.toLowerCase().includes(filter.toLowerCase());
					}
			}
			displayAsActive(filterByNameEnabled, $('#nameFilterContainer').get(0));
			loadImages();
		}
		
		// date filter
		function filterByDateRange() {
			// the number of milliseconds from midnight UTC the morning of 1970-01-01 to the time represented by the Date object
			filterFrom = document.getElementById("inputDateFromFilter").valueAsNumber;
			filterTo = document.getElementById("inputDateToFilter").valueAsNumber;
			
			// check if dates changed
			if ( (filterFrom !== currentFromFilterDate && !(isNaN(filterFrom) && isNaN(currentFromFilterDate))) || 
				 (filterTo !== currentToFilterDate && !(isNaN(filterTo) && isNaN(currentToFilterDate)))) {
				currentFromFilterDate = filterFrom;
				currentToFilterDate = filterTo;
			} else {
				return;
			}
			
			if ((isBlank(filterFrom) || isNaN(filterFrom)) && (isBlank(filterTo) || isNaN(filterTo))) {
				dateRangeFilterFunc = function(dataItemToFilter) {return true;};
				filterByDateEnabled = false;
				
			} else {
				filterByDateEnabled = true;
				if (isBlank(filterFrom) || isNaN(filterFrom)) {
					filterFrom = -1;
				}
				
				if (isBlank(filterTo) || isNaN(filterTo)) {
					filterTo = Number.MAX_VALUE;
				}
			
				dateRangeFilterFunc = function(dataItemToFilter) {
						return dataItemToFilter.timestamp && dataItemToFilter.timestamp >= filterFrom && dataItemToFilter.timestamp <= filterTo;
					}
			}
			displayAsActive(filterByDateEnabled, $('#dateFilterContainer').get(0));
			loadImages();
		}
		
		function filterFromDateChanged() {
			var filterFrom = document.getElementById("inputDateFromFilter").valueAsNumber;
			if (isBlank(filterFrom) || isNaN(filterFrom)) filterByDateRange(); // onblur does not fire in FF when clearing the date
		}
		
		function filterToDateChanged() {
			var filterTo = document.getElementById("inputDateToFilter").valueAsNumber;
			if (isBlank(filterTo) || isNaN(filterTo)) filterByDateRange(); // onblur does not fire in FF when clearing the date
		}
		
		
		// tags filter
		function filterByTags() {
		
			var filterTags = $('#tagsFilter').val();
			
			if (arraysEqual(filterTags, currentFilterTags)) return;
			
			currentFilterTags = filterTags;
			
			if (!filterTags || filterTags.length == 0) {
				tagsFilterFunc = function(dataItemToFilter) {return true;};
				filterByTagsEnabled = false;
			} else {
				filterByTagsEnabled = true;
				tagsFilterFunc = function(dataItemToFilter) {
						return dataItemToFilter.tags && findIntersection(dataItemToFilter.tags.split(","), filterTags).length > 0;
					}
			}
			displayAsActive(filterByTagsEnabled, $('#tagsFilterContainer').get(0));
			loadImages();
		}
		
		(function() {
				$('#tagsFilter').on('show.bs.select', function (e) {
					toggleDisplaySidebarElementInForeground($('#tagsFilterContainer'), true);
				});
		
				$('#tagsFilter').on('hide.bs.select', function (e) {
					toggleDisplaySidebarElementInForeground($('#tagsFilterContainer'), false);
					filterByTags();
				});
		}());
		
		// category filter
		(function() {
				// TODO: this will not work with multiple clearable dropdowns
				$('.bs-select-clear-selected').click(function() {
					currentFilterCategory = null;
					filterByCategoryEnabled = false;
					categoryFilterFunc = function(dataItemToFilter) {return true;};
					displayAsActive(filterByCategoryEnabled, $('#categoryFilterContainer').get(0));
					loadImages();
				});
		}());
		
		(function() {
				$('#categoryFilter').on('show.bs.select', function (e) {
					toggleDisplaySidebarElementInForeground($('#categoryFilterContainer'), true);
				});
		
				$('#categoryFilter').on('hide.bs.select', function (e) {
					toggleDisplaySidebarElementInForeground($('#categoryFilterContainer'), false);
					filterByCategory();
				});
		}());
		
		function toggleDisplaySidebarElementInForeground(element, showInForeground) {
			$('#sidebar-container > ul > div').each(function(index) {
				if (showInForeground) {
					if (!element.is($(this))) {
						$(this).css('z-index', 0);
					}
				} else {
					$(this).css('z-index', 2)
				}
			});
		}
		
		function filterByCategory() {
		
			var filterCategory = $('#categoryFilter').val();
			
			if (filterCategory === currentFilterCategory) return;
			currentFilterCategory = filterCategory;
			
			if (!filterCategory) {
				filterByCategoryEnabled = false;
				categoryFilterFunc = function(dataItemToFilter) {return true;};
			} else {
				filterByCategoryEnabled = true;
				categoryFilterFunc = function(dataItemToFilter) {
						return dataItemToFilter.categories && dataItemToFilter.categories.split(",").includes(filterCategory);
					}
			}
			displayAsActive(filterByCategoryEnabled, $('#categoryFilterContainer').get(0));
			loadImages();
		}
		
		// combine tags and category filter
		function toggleTagsAndCategoryFilter() {
		
			categoriesAndTags = !categoriesAndTags;
			
			if (categoriesAndTags) {
				$('#toggleTagsAndCategoryFilterBtn').html("Tags AND Category");
			} else {
				$('#toggleTagsAndCategoryFilterBtn').html("Tags OR Category");
			}
			
			if (filterByCategoryEnabled && filterByTagsEnabled) {
				loadImages();
			}
		}
		
		
		//// sidebar ////
		function openSidebar() {
		  $('#sidebarOpenBtn').hide();
		  document.getElementById("sidebar-container").style.left = "0px";
		}

		function closeSidebar() {
		  document.getElementById("sidebar-container").style.left = "-250px";
		  $('#sidebarOpenBtn').show(500);
		}
		
		(function() {
			$('#sidebarOpenBtn').on('click', function(e) {
					return false;
				});
		});
		
		function displayAsActive(isActive, element) {
			if (isActive) {
				element.classList.remove("bg-dark");
				element.classList.add("active");
			} else {
				element.classList.remove("active");
				element.classList.add("bg-dark");
			}
		}
		
		
		
		
		// rating
		function displayRating(imageTarget) {
		
			var rateEl = $('.galleria-info').find('#rating');
			if (rateEl.length === 0)
				rateEl = $('.galleria-info').append(ratingHtml).find('#rating');
			
			// disable arrowkey navigation to the next input which changes the selection of the next image when the rating input box is focused
			rateEl.on("keydown keyup keyleft keyright", "input", function(event) { 
					event.preventDefault();
			});
			
			var item = JSON.parse(localStorage.getItem(imageTarget.getAttribute("src")));
			
			refreshRating(rateEl, item == null ? null : item.rating);
		}
		
		function rateImage(event, rating) {
		
			if (!isLocalStorageAccepted()) {
				alert("Unable to remember new rating without permission to use local browser storage.");
				return;
			}
		
			var galleriaRef = Galleria.get(0);
			var currentImgData = galleriaRef.getData(galleriaRef.getIndex());
			if (currentImgData) {
				localStorage.setItem(currentImgData.image, '{"rating":' + rating + "}");
			}
			
			refreshRating($(event.target.parentElement), rating);
		}
		
		function refreshRating(rateEl, rating) {
			rateEl.children('span').each(function(index) {
				var isChecked = rating && index < rating;
				$(this).get(0).className = isChecked ? 'fa fa-star checked' : 'fa fa-star unchecked';
			});
		}
		
		var ratingHtml = 
			'<div id="rating" class="rate">'
				+ '<span class = "fa fa-star unchecked" onclick=\'rateImage(event, 1)\'></span>'
				+ '<span class = "fa fa-star unchecked" onclick=\'rateImage(event, 2)\'></span>'
				+ '<span class = "fa fa-star unchecked" onclick=\'rateImage(event, 3)\'></span>'
				+ '<span class = "fa fa-star unchecked" onclick=\'rateImage(event, 4)\'></span>'
				+ '<span class = "fa fa-star unchecked" onclick=\'rateImage(event, 5)\'></span>'
			+ '</div>';
		 
		 
		 (function() {
		 		 // enable rating with number keys
				$(window).keydown(function( event ) {
						
						if (!isViewingImage()) {
							return;
						}
						
						var rateEl = $('.galleria-info').find('#rating');
						
						// key codes are from 49 (1) to 53 (5)
						if (event.which == 49) {
							rateEl.children('span').get(0).click();
						} else if (event.which == 50) {
							rateEl.children('span').get(1).click();
						} else if (event.which == 51) {
							rateEl.children('span').get(2).click();
						} else if (event.which == 52) {
							rateEl.children('span').get(3).click();
						} else if (event.which == 53) {
							rateEl.children('span').get(4).click();
						}
				});
		 }());
		 
		 
		 // initialising selections
		 // tags
		 function refreshSelectableTags() {
			var allTagsSet = new Set();
			imgData.forEach(function(imgDataItem) {
				if (imgDataItem.tags) {
					imgDataItem.tags.split(',').forEach(t => allTagsSet.add(t));
				}
			});
			
			$('#tagsFilter').empty();
			allTagsSet.forEach(function(tag) {
				$('#tagsFilter').append('<option value="' + tag + '">' + tag + '</option>');
			});
			
			$('#tagsFilter').selectpicker('refresh');
		 }
		 
		 
		 // categories
		 function refreshSelectableCategories() {
			var allCategoriesSet = new Set();
			imgData.forEach(function(imgDataItem) {
				if (imgDataItem.categories) {
					imgDataItem.categories.split(',').forEach(t => allCategoriesSet.add(t));
				}
			});
			
			$('#categoryFilter').empty();
			allCategoriesSet.forEach(function(category) {
				$('#categoryFilter').append('<option value="' + category + '">' + capitalise(category) + '</option>');
			});
			
			$('#categoryFilter').selectpicker('refresh');
		 }
		 
		 
		
		
		// utils
		function isBlank(str) {
			return (!str || /^\s*$/.test(str));
		}
		
		function capitalise(str) {
			return str.charAt(0).toUpperCase() + str.slice(1);
		}
		
		function findIntersection(arr1, arr2) {
			return arr1.filter(function(n) {
				  return arr2.indexOf(n) > -1;
				});
		}
		
		function isViewingImage() {
			return Galleria.get(0).getActiveImage() != null && $(Galleria.get(0).getActiveImage()).is(':visible');
		}
		
		function arraysEqual(a, b) {
		  if (a === b) return true;
		  if (a == null || b == null) return false;
		  if (a.length !== b.length) return false;

		  for (var i = 0; i < a.length; ++i) {
			if (a[i] !== b[i]) return false;
		  }
		  return true;
		}
		
		
		
		
		
		
		/* SHOW IMAGE IN ORIGINAL SIZE */
		
		// allow scrolling with mousewheel
		var scrollDistance = 170;

		$(window).on("mousewheel DOMMouseScroll", function(event){
			// is viewing image in original size / custom resize mode on
			if ($("#fullSizeImage").length && $("#fullSizeImage").get(0).style.display != "none") {
				var target = $(".galleria-images").get(0);

				event.preventDefault();
				
				if (event.shiftKey) {
					// change image size
					var range = $("#imageSizeRange");
					if (range.length) {
						var delta = event.originalEvent.wheelDelta/120 || -event.originalEvent.detail/3;
						range.val(range.val() - delta*0.04);
						range.change();
					}
					
				} else {
					// scroll the view
					var delta = event.originalEvent.wheelDelta/120 || -event.originalEvent.detail/3;
					target.scrollTop -= parseInt(delta*scrollDistance);
				}
				
			}
		});

		
		Galleria.on('fullscreen_exit', function(e) {
			hideImageSizeRange();
		});
		
		function hideImageSizeRange() {
			var range = $("#imageSizeRange");
			if (range.length) {
				range.css('display','none');
			}
		}
		
		// galleria event callback when an preview image has been selected and is displayed in the lightbox 
		Galleria.on('image', function(e) {
		
			++numberOfFullSizeImagesLoaded;
				
			// move the info box to the left from center
			// actually moves presumably because the folio theme sets the style -webkit-transition: all 100ms;
			$('.galleria-info').css("left", "0px");
		
			// TODO: remove, can be retireved statically
			var galleriaRef = this;
			
			displayRating(e.imageTarget);
		
			// when selecting next or prev image, need to reset the full size image view as it does not display properly (scroll pane is still as large as previous image)
			// to do so we set a custom id to mark the image we last viewed in full size, retrieving the current image from Galleria would not work because the full sized image may not be the current one anymore
			if ($("#fullSizeImage").length) {
				resetFullSizeView(e, galleriaRef)
			}
		
			// show original image size when clicking on the image
			// e.imageTarget = the currently active IMG HTML element
			e.imageTarget.parentElement.onclick = function() {
			
				if (!$("#fullSizeImage").length) {
					
					currentImg = e.imageTarget;
					currentImg.id = "fullSizeImage";
					
					currentImg.parentElement.parentElement.style.overflow = 'auto';
					currentImg.parentElement.style.overflow = ''; // if we set auto here, it will crop the vertical scrollbar for some reason
					currentImg.parentElement.style.height = 'auto';
					currentImg.parentElement.style.width = 'auto';
					currentImg.parentElement.style.position = '';
					
					currentImg.style.height = 'auto';
					currentImg.style.width = 'auto';
					currentImg.height = 'auto';
					currentImg.width = 'auto';
					currentImg.style.margin = 'auto';
					// clear the absolute positioning because for some reason does not show otherwise
					currentImg.style.position = '';
					currentImg.style.overflow = 'auto';
					
					// issue: this hides the left/right navigation completely
					//$(".galleria-image-nav").css("z-index", "-1");
					// the nav spans from right to left with 100% width and would blocks click event on the image or the scrollbar
					// it starts to block because the position is cleared from the image, which means the z-index property stops working and it slides into the background
					// so set to ignore click events but allow click events specifically on the left and right navigation which are only small bars on the sides of the screen
					$(".galleria-image-nav").css("pointer-events", "none");
					$(".galleria-image-nav-right").css("pointer-events", "auto");
					$(".galleria-image-nav-left").css("pointer-events", "auto");
					// need to leave a bit of space to not obstruct the scrollbar by the right nav element control which overlays the image
					$(".galleria-image-nav").css("width", "99%");
					
					// custom resize
					let optimalWidthRatio = 0.80;
					let maxScale = 1.5;
					let screenWidth = document.documentElement.clientWidth;
					let optimalWidth = optimalWidthRatio * screenWidth;
					let optimalScale = optimalWidth / currentImg.clientWidth;
					if (optimalScale > maxScale) {
						optimalScale = maxScale;
					}
					
					var range = $("#imageSizeRange");
					if (!range.length) {
						var rangeHtml = '<input type="range" class="form-range image-size-range" min="0.1" max="' + maxScale + '" step="0.01" id="imageSizeRange" data-toggle="tooltip" data-placement="bottom" title="Use Shift + Mousewheel">';
						$('.galleria-container').append(rangeHtml);
						range = $("#imageSizeRange");
					} else {
						range.css('display','block');
					}
					
					range.css("display", "block");
					range.on("input change", function() {
						applyScaleToImg(range.val(), currentImg);
					});
					
					range.val(optimalScale);
					applyScaleToImg(range.val(), currentImg);
					
				} else {
					resetFullSizeView(e, galleriaRef);
				}
			}
		});
		
		function applyScaleToImg(scale, currentImg) {
			var newHeight = currentImg.naturalHeight * scale + 'px';
			var newWidth = currentImg.naturalWidth * scale + 'px';
			currentImg.style.height = newHeight;
			currentImg.style.width = newWidth;
			currentImg.width = newWidth;
			currentImg.height = newHeight;
		}
		
		// TODO: no need to pass in the galleria ref, can be retirved statically
		function resetFullSizeView(e, galleriaRef) {
			// Fitting image to screen size
			
			var currentImg = $("#fullSizeImage").get(0);
			
			hideImageSizeRange();
			
			currentImg.parentElement.parentElement.style.overflow = 'hidden';
			currentImg.parentElement.style.overflow = 'hidden';
			currentImg.parentElement.style.height = '100%';
			currentImg.parentElement.style.width = '100%';
			currentImg.parentElement.style.position = 'absolute';
			
			currentImg.style.height = '100%';
			currentImg.style.width = '100%';
			currentImg.height = '';
			currentImg.width = '';
			currentImg.style.margin = '';
			currentImg.style.position = 'absolute';
			currentImg.style.overflow = 'hidden';
			
			// bug: do not unset these; for some reason they are sometimes not set again so the image can not be clicked...
			//$(".galleria-image-nav").css("width", "100%");
			//$(".galleria-image-nav").css("pointer-events", "");
			//$(".galleria-image-nav-right").css("pointer-events", "");
			//$(".galleria-image-nav-left").css("pointer-events", "");
			
			currentImg.id = null;
			
			// TODO: if the window is resized while viewing full image, the image is rescaled to fit the screen, above code to reset the style should be triggered on the rescale callback
			//galleriaRef.resize({width:'100%', height:'100%'});
			galleriaRef.refreshImage();
		}
		
		$(function () {
		  $('[data-toggle="tooltip"]').tooltip()
		})
		
    </script>

</body>
</html>
